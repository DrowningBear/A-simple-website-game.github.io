<!DOCTYPE html>
<html>
<head>
    <title>商店</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>欢迎来到商店</h1>
    <p>木头: <span id="woodCount">0</span></p>
    <p>鲜肉: <span id="meatCount">0</span></p>
    <p>货币: <span id="moneyCount">0</span></p>
    <label for="sellWood">出售木头数量:</label>
    <input type="number" id="sellWood" value="0">
    <label for="sellMeat">出售鲜肉数量:</label>
    <input type="number" id="sellMeat" value="0">
    <button id="sellResources">出售资源</button>

    <script>
        const woodPrice = 10; // 每块木头10货币
        const meatPrice = 20; // 每块鲜肉20货币

        function sellResources() {
            const sellWood = parseInt(document.getElementById('sellWood').value, 10);
            const sellMeat = parseInt(document.getElementById('sellMeat').value, 10);

            if (sellWood > woodCount || sellMeat > meatCount) {
                alert("您没有足够的资源进行交易！");
                return;
            }

            const woodValue = sellWood * woodPrice;
            const meatValue = sellMeat * meatPrice;

            moneyCount += woodValue + meatValue;
            woodCount -= sellWood;
            meatCount -= sellMeat;

            document.getElementById('woodCount').textContent = woodCount;
            document.getElementById('meatCount').textContent = meatCount;
            document.getElementById('moneyCount').textContent = moneyCount;

            // 保存交易后的数据到localStorage
            saveGameData();

            document.getElementById('sellWood').value = 0;
            document.getElementById('sellMeat').value = 0;
        }

        function saveGameData() {
            localStorage.setItem('woodCount', woodCount);
            localStorage.setItem('meatCount', meatCount);
            localStorage.setItem('moneyCount', moneyCount);
        }

        document.getElementById('sellResources').addEventListener('click', sellResources);
    </script>
    <a href="gamestart.html" onclick="saveGameData()">返回游戏</a>
    <script src="shop.js"></script>
</body>
</html>
